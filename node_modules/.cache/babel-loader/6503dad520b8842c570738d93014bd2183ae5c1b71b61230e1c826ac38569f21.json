{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Downloads\\\\weather-dashboard\\\\src\\\\components\\\\SearchBar.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport weatherApi from '../api/weatherApi';\nimport { useDispatch } from 'react-redux';\nimport { fetchWeatherForCoords } from '../features/weather/weatherSlice';\nimport { addFavorite } from '../features/favorites/favoritesSlice';\nimport debounce from '../utils/debounce';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SearchBar() {\n  _s();\n  const [q, setQ] = useState('');\n  const [suggestions, setSuggestions] = useState([]);\n  const dispatch = useDispatch();\n  const fetchSuggestions = debounce(async val => {\n    if (!val || val.length < 2) {\n      setSuggestions([]);\n      return;\n    }\n    try {\n      const res = await weatherApi.geocodeCity(val, 6);\n      setSuggestions(res || []);\n    } catch (e) {\n      console.error(e);\n    }\n  }, 300);\n  useEffect(() => {\n    fetchSuggestions(q);\n    return () => fetchSuggestions.cancel();\n  }, [q]);\n  const onSelect = place => {\n    setQ('');\n    setSuggestions([]);\n    dispatch(fetchWeatherForCoords({\n      lat: place.lat,\n      lon: place.lon,\n      units: 'metric'\n    }));\n    dispatch(addFavorite({\n      name: `${place.name}${place.state ? ', ' + place.state : ''}, ${place.country}`,\n      lat: place.lat,\n      lon: place.lon\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-bar\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Search city...\",\n      value: q,\n      onChange: e => setQ(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"suggestions\",\n      children: suggestions.map((s, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n        onClick: () => onSelect(s),\n        children: [s.name, s.state ? `, ${s.state}` : '', \", \", s.country]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n}\n_s(SearchBar, \"tnsouWSKr814E2LtMvOdY6gZzf8=\", false, function () {\n  return [useDispatch];\n});\n_c = SearchBar;\nvar _c;\n$RefreshReg$(_c, \"SearchBar\");","map":{"version":3,"names":["React","useState","useEffect","weatherApi","useDispatch","fetchWeatherForCoords","addFavorite","debounce","jsxDEV","_jsxDEV","SearchBar","_s","q","setQ","suggestions","setSuggestions","dispatch","fetchSuggestions","val","length","res","geocodeCity","e","console","error","cancel","onSelect","place","lat","lon","units","name","state","country","className","children","placeholder","value","onChange","target","fileName","_jsxFileName","lineNumber","columnNumber","map","s","i","onClick","_c","$RefreshReg$"],"sources":["C:/Users/DELL/Downloads/weather-dashboard/src/components/SearchBar.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport weatherApi from '../api/weatherApi';\nimport { useDispatch } from 'react-redux';\nimport { fetchWeatherForCoords } from '../features/weather/weatherSlice';\nimport { addFavorite } from '../features/favorites/favoritesSlice';\nimport debounce from '../utils/debounce';\n\nexport default function SearchBar(){\n  const [q, setQ] = useState('');\n  const [suggestions, setSuggestions] = useState([]);\n  const dispatch = useDispatch();\n\n  const fetchSuggestions = debounce(async (val) => {\n    if (!val || val.length < 2) { setSuggestions([]); return; }\n    try {\n      const res = await weatherApi.geocodeCity(val, 6);\n      setSuggestions(res || []);\n    } catch (e) {\n      console.error(e);\n    }\n  }, 300);\n\n  useEffect(() => {\n    fetchSuggestions(q);\n    return ()=> fetchSuggestions.cancel();\n  }, [q]);\n\n  const onSelect = (place) => {\n    setQ('');\n    setSuggestions([]);\n    dispatch(fetchWeatherForCoords({ lat: place.lat, lon: place.lon, units: 'metric' }));\n    dispatch(addFavorite({ name: `${place.name}${place.state ? ', ' + place.state : ''}, ${place.country}`, lat: place.lat, lon: place.lon }));\n  };\n\n  return (\n    <div className=\"search-bar\">\n      <input placeholder=\"Search city...\" value={q} onChange={e=>setQ(e.target.value)} />\n      {suggestions.length>0 && (\n        <ul className=\"suggestions\">\n          {suggestions.map((s,i)=>(\n            <li key={i} onClick={()=>onSelect(s)}>{s.name}{s.state?`, ${s.state}`:''}, {s.country}</li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}